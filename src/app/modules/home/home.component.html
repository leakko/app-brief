<ion-header>
  <ion-toolbar class="center-in-page center-content">
    <ion-icon name="home"></ion-icon>
    <ion-buttons slot="end">
      <ng-container *ngIf="authService.isLoggedIn; else logIn">
        <ion-icon
          name="log-out-outline"
          (click)="authService.SignOut()"
        ></ion-icon>
      </ng-container>
      <ng-template #logIn>
        <ion-icon [routerLink]="['/login']" name="person-circle"></ion-icon>
      </ng-template>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <main class="center-in-page">
    <h1>Enter your WooCommerce's Data</h1>
    <section class="center-in-page center-content">
      <form [formGroup]="WCForm" (ngSubmit)="onSubmit($event)">
        <ion-item>
          <ion-label class="label">API Key</ion-label>
          <ion-input type="text" formControlName="apiKey"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label class="label">API Secret</ion-label>
          <ion-input type="text" formControlName="apiSecret"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label class="label">Url</ion-label>
          <ion-input type="text" formControlName="url"></ion-input>
        </ion-item>
        <p class="center-content">
          <ion-button type="submit" class="button">Update table</ion-button>
        </p>
      </form>
    </section>
    <hr>
    <section class="center-in-page center-content">
      <h1>Your WooCommerce's Products</h1>
      <ng-container *ngIf="errorGettingProducts; else table">
        <p>There was an error fetching your products data</p>
      </ng-container>
      <ng-template #table>
        <table>
          <tr>
            <th>Name</th>
            <th>Sku</th>
            <th>Stock Status</th>
            <th>Price</th>
            <th>Categories</th>
          </tr>
          <ng-container *ngFor="let product of products">
            <tr>
              <td>{{product.name}}</td>
              <td>{{product.sku}}</td>
              <td>{{product.stock_status}}</td>
              <td>{{product.price}}</td>
              <td>{{product.categories[0].name}}</td>
            </tr>
          </ng-container>
        </table>
      </ng-template>
    </section>
  </main>
</ion-content>
